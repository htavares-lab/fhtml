<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Fatura">
<link rel="apple-touch-icon" href="https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg">

<title>Fatura do cart√£o ‚Äì Mock (Scroll por aba)</title>
<style>
  :root{
    --blue:#2e6dd6; --blue2:#1f57b3; --bg:#f2f5fb; --card:#fff;
    --text:#0f172a; --muted:#94a3b8; --divider:#e5e7eb; --ok:#12b886;
  }
  *{box-sizing:border-box}
  html, body { overflow-x: hidden; } /* trava a rolagem lateral */
  body{
    margin:0;background:var(--bg);color:var(--text);
    font-family:-apple-system,BlinkMacSystemFont,Inter,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    display:flex;justify-content:center;
    touch-action: pan-y; /* apenas rolagem vertical */
  }
  .phone{width:min(420px,100%);min-height:100dvh;background:linear-gradient(180deg,var(--blue),var(--blue2));
    overflow-x:hidden;}
  .top{display:flex;align-items:center;justify-content:space-between;color:#fff;padding:16px 18px 8px;font-weight:700}
  .tabs{display:flex;gap:8px;padding:0 18px 16px;overflow:auto}
  .tab{border:0;background:transparent;color:#cfe0ff;padding:6px 10px;border-radius:14px;font-weight:700;white-space:nowrap;cursor:pointer}
  .tab.active{background:#ffffff22;color:#fff}
  .header{color:#fff;padding:0 18px 16px}
  .pill{display:inline-flex;gap:6px;align-items:center;background:#eafaf3;color:#0f5132;border-radius:999px;padding:6px 10px;font-size:12px;font-weight:800}
  .sheet{background:var(--bg);border-radius:18px 18px 0 0;padding:14px 14px 16px;overflow-x:hidden;}
  .card{background:var(--card);border-radius:14px;padding:16px;box-shadow:0 6px 18px rgba(0,0,0,.08)}
  .row{display:flex;align-items:center;justify-content:space-between}
  .amount{font-size:28px;font-weight:800;margin-top:10px}
  .btn{border:2px solid #e8f0ff;background:#fff;color:#1f57b3;border-radius:10px;padding:8px 12px;font-weight:800;cursor:pointer}
  .title{margin:14px 2px 8px;font-weight:800}
  .search{display:flex;align-items:center;gap:8px;background:#fff;border:1px solid #e7ecf7;border-radius:12px;padding:10px 12px}
  .search input{border:0;outline:0;width:100%}
  .list-wrap{
    margin-top:10px;background:#fff;border:1px solid #eef2f7;border-radius:14px;
    overflow-y:auto; overflow-x:hidden; max-height:60dvh;
    -webkit-overflow-scrolling:touch;
    touch-action: pan-y;
    overscroll-behavior-x: contain;
  }
  .list{overflow:visible;max-width:100%;}
  .item{display:grid;grid-template-columns:64px 1fr auto;gap:10px;align-items:center;padding:12px 14px;border-bottom:1px solid var(--divider);word-break:break-word;}
  .item:last-child{border-bottom:0}
  .date{text-align:center;font-weight:700;color:#334155}
  .date small{display:block;color:var(--muted);font-weight:600}
  .desc{display:flex;flex-direction:column;gap:2px;word-break:break-word;}
  .dot{width:8px;height:8px;border-radius:50%;background:#9aa6b2;display:inline-block;margin-right:6px}
  .subtitle{font-size:12px;color:#94a3b8}
  .value{font-weight:800}
  .chev{color:#c0c6d4;margin-left:10px}
  .hint{padding:10px 14px;color:#64748b;font-size:12px;text-align:center}
</style>
</head>
<body>
<div class="phone">
  <div class="top">
    <div>‚Äπ</div><div>Fatura do cart√£o</div><div style="width:16px"></div>
  </div>
  <div class="tabs" id="tabs"></div>

  <div class="header">
    <div style="background:#ffffff1a;display:inline-flex;gap:8px;padding:6px 10px;border-radius:10px;">
      Henrique L Tavares ‚Ä¢ **** 9249
    </div>
  </div>

  <div class="sheet">
    <div class="card">
      <div class="row">
        <span class="pill" id="statusFatura">‚úîÔ∏é Fatura paga</span>
        <button class="btn" id="btnPdf">Ver em PDF</button>
      </div>
      <div class="amount" id="amount">R$ ‚Äî</div>
    </div>

    <div class="title">Lan√ßamentos</div>
    <div class="search">üîé
      <input id="search" placeholder="Busque por nome ou valor">
    </div>

    <div class="list-wrap" id="listWrap">
      <div class="list" id="list"></div>
      <div class="hint" id="hint">Role para ver mais‚Ä¶</div>
    </div>
  </div>
</div>

<script>
  const BASE = {
    "Mai": [
  {date:"30 Mai", title:"SUPERMERCADO BOM PRE√áO", value:182.45},
  {date:"28 Mai", title:"CAFE DO FEIRANTE", value:42.80},
  {date:"27 Mai", title:"POSTO 24 HORAS", value:130.00},
  {date:"26 Mai", title:"UNIMARTECH EVENTO TECHDAY", value:79.90},
  {date:"25 Mai", title:"EBN*SONYPLAYSTATN", value:13.90},
  {date:"24 Mai", title:"AUTO POSTO EXPRESS", value:119.00},
  {date:"23 Mai", title:"LANCHONETE DA PRA√áA", value:58.30},
  {date:"22 Mai", title:"MARE BEACH CLUB-EVENTO", value:265.00},
  {date:"21 Mai", title:"PURA BEACH CAFE", value:92.10},
  {date:"20 Mai", title:"IFD*ANA PAULA DE MELO LTDA", value:89.50},
  {date:"19 Mai", title:"AMAZON BR", value:59.90},
  {date:"18 Mai", title:"PAYGO*L B FOOD LTDA", value:124.30},
  {date:"17 Mai", title:"CENTAURO CE122", value:289.99, note:"Parcela 2 de 2"},
  {date:"16 Mai", title:"POSTO SHELL CENTER", value:220.00},
  {date:"15 Mai", title:"CONFIANCA AQUARIUS", value:98.61},
  {date:"10 Mai", title:"PADARIA AROMA", value:24.90},
  {date:"07 Mai", title:"IFOOD *PAGAMENTO", value:44.20},
  {date:"03 Mai", title:"APPLE.COM/BILL", value:19.90},
  {date:"02 Mai", title:"SPOTIFY", value:34.90},
],
    "Jun":[
  {date:"30 Mai", title:"SUPERMERCADO BOM PRE√áO", value:182.45},
  {date:"28 Mai", title:"CAFE DO FEIRANTE", value:42.80},
  {date:"27 Mai", title:"POSTO 24 HORAS", value:130.00},
  {date:"26 Mai", title:"UNIMARTECH EVENTO TECHDAY", value:79.90},
  {date:"25 Mai", title:"EBN*SONYPLAYSTATN", value:13.90},
  {date:"24 Mai", title:"AUTO POSTO EXPRESS", value:119.00},
  {date:"23 Mai", title:"LANCHONETE DA PRA√áA", value:58.30},
  {date:"22 Mai", title:"MARE BEACH CLUB-EVENTO", value:265.00},
  {date:"21 Mai", title:"PURA BEACH CAFE", value:92.10},
  {date:"20 Mai", title:"IFD*ANA PAULA DE MELO LTDA", value:89.50},
  {date:"19 Mai", title:"AMAZON BR", value:59.90},
  {date:"18 Mai", title:"PAYGO*L B FOOD LTDA", value:124.30},
  {date:"17 Mai", title:"CENTAURO CE122", value:289.99, note:"Parcela 2 de 2"},
  {date:"16 Mai", title:"POSTO SHELL CENTER", value:220.00},
  {date:"15 Mai", title:"CONFIANCA AQUARIUS", value:98.61},
  {date:"10 Mai", title:"PADARIA AROMA", value:24.90},
  {date:"07 Mai", title:"IFOOD *PAGAMENTO", value:44.20},
  {date:"03 Mai", title:"APPLE.COM/BILL", value:19.90},
  {date:"02 Mai", title:"SPOTIFY", value:34.90},
],
    "Jul":[
      {date:"27 Jun", title:"SEU BAPTISTA CHOPP E LA", value:105.30},
      {date:"26 Jun", title:"EBN* SONYPLAYSTA", value:13.90},
      {date:"25 Jun", title:"CONFIANCA AQUARIUS", value:98.61},
      {date:"23 Jun", title:"AUTO POSTO EXPRESS", value:100.00},
      {date:"18 Jun", title:"CAFE DO FEIRANTE", value:48.97},
      {date:"15 Jun", title:"MARE BEACH CLUB-EVENTO", value:221.00},
      {date:"15 Jun", title:"PURA BEACH CAFE", value:122.10},
      {date:"15 Jun", title:"IFD*BARBADO RESTAURANTE L", value:140.99},
      {date:"13 Jun", title:"POSTO 24 HORAS", value:130.00},
      {date:"12 Jun", title:"PAYGO*L B FOOD LTDA", value:365.97},
      {date:"12 Jun", title:"TANGARA ACABAMENTOS P", value:314.37},
      {date:"11 Jun", title:"CENTAURO CE122", value:264.99, note:"Parcela 1 de 2"},
      {date:"07 Jun", title:"ELEFA BAURUPOSTO", value:122.76},
      {date:"07 Jun", title:"UNESPBAURU", value:32.50},
      {date:"07 Jun", title:"UNESPBAURU", value:21.00},
      {date:"07 Jun", title:"AUTO POSTO EXPRESS", value:289.92},
      {date:"06 Jun", title:"CONFIANCA ESMERALDA", value:66.91},
      {date:"04 Jun", title:"VIA NOTE AUTO POSTO", value:60.00},
      {date:"02 Jun", title:"IFD*ANA PAULA DE MELO LTDA", value:87.96},
      {date:"22 Mai", title:"R B R ESQUADRILHAS", value:500.00, note:"Parcela 2 de 3"},
    ],
    "Ago":[
      {date:"15 Ago", title:"APPLE.COM/BILL", value:19.90},
      {date:"13 Ago", title:"CONFIAN√áA AQUARIUS", value:88.10},
      {date:"12 Ago", title:"PAG*SONYPLAYSTATN", value:13.97, note:"Parcela 2 de 4"},
    ],
    "Set":[
      {date:"10 Set", title:"MERCADO LIVRE", value:249.00},
      {date:"07 Set", title:"UBER EATS", value:32.40},
      {date:"05 Set", title:"POSTO SHELL", value:190.00},
    ],
    "Out":[
      {date:"14 Out", title:"AMERICANAS LOJA", value:129.90},
      {date:"12 Out", title:"IFOOD *PAGAMENTO", value:42.50},
      {date:"11 Out", title:"APPLE.COM/BILL", value:19.90},
      {date:"09 Out", title:"ESTACIONAMENTO CENTRO", value:12.00},
      {date:"08 Out", title:"FARM√ÅCIA SA√öDE", value:58.61}
    ],
    "Nov":[
      {date:"03 Nov", title:"AMAZON BR", value:89.90},
      {date:"02 Nov", title:"SPOTIFY", value:34.90},
      {date:"01 Nov", title:"NETFLIX", value:39.90},
      {date:"01 Nov", title:"POSTO SHELL", value:210.00},
      {date:"01 Nov", title:"PADARIA AROMA", value:28.40}
    ]
  };

  // Clona muitos itens para cada m√™s para simular "v√°rias faturas/lan√ßamentos"
  function inflateMonth(list, repeat=50){
    const out = [];
    for(let r=0;r<repeat;r++){
      list.forEach((i, idx)=>{
        const [dia, mes] = i.date.split(" ");
        const nDia = String(Math.max(1, (parseInt(dia)||1) - (r%28))).padStart(2,"0");
        out.push({
          date: `${nDia} ${mes}`,
          title: i.title,
          value: i.value + ((idx+r)%3===0? 0.10:0),
          note: i.note
        });
      });
    }
    return out;
  }

  const DATA = {
    "Mai": BASE["Mai"],
    "Jun": BASE["Jun"],
    "Jul": BASE["Jul"],
    "Ago": inflateMonth(BASE["Ago"], 10),
    "Set": inflateMonth(BASE["Set"], 11),
    "Out": inflateMonth(BASE["Out"], 12),
    "Nov": inflateMonth(BASE["Nov"], 10),
  };

  const MONTHS = ["Mai","Jun","Jul","Ago","Set","Out","Nov"];
  let current = "Nov";

  const state = MONTHS.reduce((acc,m)=> (acc[m]={visible:30, scroll:0}, acc), {});
  const PAGE = 30;

  const $ = (id)=>document.getElementById(id);
  const tabsEl = $("tabs"), listEl = $("list"), amountEl = $("amount"),
        searchEl = $("search"), listWrap = $("listWrap"), hintEl = $("hint"),
        statusFatura = $("statusFatura");

  const money = (v)=> v.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});

  function renderTabs(){
    tabsEl.innerHTML = "";
    MONTHS.forEach(m=>{
      const b = document.createElement("button");
      b.className = "tab"+(m===current?" active":"");
      b.textContent = m;
      b.onclick = ()=>{
        state[current].scroll = listWrap.scrollTop;
        current = m;
        searchEl.value = "";
        render(true);
      };
      tabsEl.appendChild(b);
    });
  }

  function computeTotal(items){ return items.reduce((s,i)=>s+i.value,0); }

  function render(restoreScroll=false){
    renderTabs();

    // controla visibilidade do selo "Fatura paga"
    if (current === "Out" || current === "Nov") {
      statusFatura.style.display = "none";
    } else {
      statusFatura.style.display = "inline-flex";
    }

    const itemsAll = DATA[current] || [];
    const q = searchEl.value.trim().toLowerCase();

    const filtered = q
      ? itemsAll.filter(i => i.title.toLowerCase().includes(q) || money(i.value).includes(q) || i.date.toLowerCase().includes(q))
      : itemsAll.slice(0, state[current].visible);

    const total = q ? computeTotal(filtered) : computeTotal(itemsAll);
    amountEl.textContent = money(total);

    listEl.innerHTML = "";
    filtered.forEach(i=>{
      const row = document.createElement("div");
      row.className = "item";
      row.innerHTML = `
        <div class="date">${i.date}<small>${current}</small></div>
        <div class="desc">
          <div><span class="dot"></span>${i.title}</div>
          ${i.note? `<div class="subtitle">${i.note}</div>`:""}
        </div>
        <div style="display:flex;align-items:center;">
          <div class="value">${money(i.value)}</div>
          <span class="chev">‚Ä∫</span>
        </div>`;
      listEl.appendChild(row);
    });

    if(filtered.length===0){
      const empty = document.createElement("div");
      empty.className = "item";
      empty.innerHTML = `<div></div><div class="subtitle">Nenhum lan√ßamento encontrado.</div><div></div>`;
      listEl.appendChild(empty);
      hintEl.textContent = "";
    }else{
      if(q){
        hintEl.textContent = "Resultados filtrados.";
      }else if(state[current].visible < itemsAll.length){
        hintEl.textContent = "Role para ver mais‚Ä¶";
      }else{
        hintEl.textContent = "Fim da lista.";
      }
    }

    if(restoreScroll){
      listWrap.scrollTop = state[current].scroll || 0;
    }
  }

  listWrap.addEventListener("scroll", ()=>{
    const q = searchEl.value.trim();
    if(q) return;
    const itemsAll = DATA[current] || [];
    if(state[current].visible >= itemsAll.length) return;
    const nearBottom = listWrap.scrollTop + listWrap.clientHeight >= listWrap.scrollHeight - 40;
    if(nearBottom){
      state[current].visible = Math.min(itemsAll.length, state[current].visible + PAGE);
      const prevScroll = listWrap.scrollTop;
      render();
      listWrap.scrollTop = prevScroll;
    }
  });

  searchEl.addEventListener("input", ()=> render());
  $("btnPdf").onclick = ()=> alert("Sistema fora do ar, tente novamente em alguns instantes.");
  render(true);

  // üîí trava arrasto lateral no iOS/Android (fallback)
  (function lockAxis(){
    const el = document.getElementById('listWrap');
    if (!el) return;
    let startX = 0, startY = 0;
    el.addEventListener('touchstart', (e) => {
      const t = e.touches[0];
      startX = t.clientX; startY = t.clientY;
    }, { passive: true });
    el.addEventListener('touchmove', (e) => {
      const t = e.touches[0];
      const dx = Math.abs(t.clientX - startX);
      const dy = Math.abs(t.clientY - startY);
      if (dx > dy) e.preventDefault(); // bloqueia gesto horizontal
    }, { passive: false });
  })();
</script>
</body>
</html>
